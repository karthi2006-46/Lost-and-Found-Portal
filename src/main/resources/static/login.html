<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="d-flex justify-content-center align-items-center vh-100">

<div class="card p-4" style="width:350px">
  <h4 class="text-center mb-3">Login</h4>

  <form id="loginForm">
    <input id="username" class="form-control mb-2" placeholder="Username" required>
    <input id="password" type="password" class="form-control mb-3" placeholder="Password" required>
    <button type="submit" class="btn btn-primary w-100">Login</button>
  </form>
</div>

<script>
document.getElementById("loginForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const username = document.getElementById("username").value;
  const password = document.getElementById("password").value;

  const res = await fetch("/api/auth/login", {
    method: "POST",
    headers: { "Content-Type":"application/json" },
    body: JSON.stringify({ username, password })
  });

  if(!res.ok){
    alert("Invalid username or password");
    return;
  }

  const data = await res.json();
  localStorage.setItem("token", data.token);

  alert("Login successful");
  window.location.href="/post.html";
});
</script>

</body>
</html>
